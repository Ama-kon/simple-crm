<p class="search-bar">
  <mat-form-field appearance="outline">
    <mat-label>Filter Clients</mat-label>
    <input
      matInput
      [(ngModel)]="searchTerm"
      (ngModelChange)="filterUsers()"
      placeholder="Search..."
    />
    <mat-icon matSuffix>search</mat-icon>
  </mat-form-field>
</p>

<mat-card>
  <mat-card-content>
    <table class="responsive-table">
      <thead>
        <tr>
          <th class="border-btm width-15">
            <div class="header-content">
              First Name
              <button mat-icon-button (click)="sortUsers('firstName')">
                <mat-icon>swap_vert</mat-icon>
              </button>
            </div>
          </th>
          <th class="border-btm width-15">
            <div class="header-content">
              Last Name
              <button mat-icon-button (click)="sortUsers('lastName')">
                <mat-icon>swap_vert</mat-icon>
              </button>
            </div>
          </th>
          <th class="border-btm">
            <div class="header-content">
              Birth Date
              <button mat-icon-button (click)="sortUsers('birthDate')">
                <mat-icon>swap_vert</mat-icon>
              </button>
            </div>
          </th>
          <th class="border-btm width-25">
            <div class="header-content">
              E-Mail
              <button mat-icon-button (click)="sortUsers('email')">
                <mat-icon>swap_vert</mat-icon>
              </button>
            </div>
          </th>
          <th class="border-btm">
            <div class="header-content">
              City
              <button mat-icon-button (click)="sortUsers('city')">
                <mat-icon>swap_vert</mat-icon>
              </button>
            </div>
          </th>
          <th class="border-btm"></th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="
            let user of filteredUsers.length > 0 ? filteredUsers : allUsers$
          "
          [routerLink]="['/user/' + user.id]"
        >
          <td class="border-btm width-15">{{ user.firstName }}</td>
          <td class="border-btm width-15">{{ user.lastName }}</td>
          <td class="border-btm">{{ formatDate(user.birthDate) }}</td>
          <td class="border-btm">{{ user.email }}</td>
          <td class="border-btm">{{ user.city }}</td>
          <td class="border-btm">
            <button mat-icon-button aria-label="edit">
              <mat-icon>edit</mat-icon>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </mat-card-content>
</mat-card>

<button
  class="add-button"
  mat-fab
  matTooltip="Add a new client"
  [matTooltipPosition]="'above'"
  (click)="openDialog()"
  color="primary"
>
  <mat-icon>add</mat-icon>
</button>
